<!-- Sidebar Bubble Background -->
<app-bubble></app-bubble>
<app-dotted></app-dotted>

<div class="min-h-screen flex relative z-10">

  <!-- Sidebar -->
  <aside
    [ngClass]="{'translate-x-0': isSidebarOpen, '-translate-x-full': !isSidebarOpen}"
    class="fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-b from-blue-400 via-blue-500 to-blue-600 text-white shadow-2xl flex flex-col p-6 transform transition-transform duration-300 md:translate-x-0 md:static md:block"
  >
<app-bubble></app-bubble>

    <!-- Header -->
    <div class="flex justify-between items-center mb-10">
      <div class="text-2xl font-extrabold tracking-wide drop-shadow-lg">My Portfolios</div>
      <!-- Close button for mobile -->
      <button class="md:hidden text-white hover:text-yellow-300 transition" (click)="toggleSidebar()">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 space-y-4">
      <button (click)="goDashboard()"
              [ngClass]="{'bg-blue-600 shadow-lg scale-105': activeLink==='dashboard'}"
              class="w-full text-left py-3 px-4 rounded-xl hover:bg-blue-500 hover:scale-105 transition transform duration-300">
        Dashboard
      </button>
      <button (click)="goAdd()"
              [ngClass]="{'bg-blue-600 shadow-lg scale-105': activeLink==='add'}"
              class="w-full text-left py-3 px-4 rounded-xl hover:bg-blue-500 hover:scale-105 transition transform duration-300">
        Add Portfolio
      </button>
      <button (click)="goHome()"
              [ngClass]="{'bg-blue-600 shadow-lg scale-105': activeLink==='home'}"
              class="w-full text-left py-3 px-4 rounded-xl hover:bg-blue-500 hover:scale-105 transition transform duration-300">
        Home
      </button>
      <button (click)="load()"
              [ngClass]="{'bg-blue-600 shadow-lg scale-105': activeLink==='refresh'}"
              class="w-full text-left py-3 px-4 rounded-xl hover:bg-blue-500 hover:scale-105 transition transform duration-300">
        Refresh
      </button>
    </nav>

    <!-- Logout at bottom -->
    <div class="mt-auto pt-6">
      <button (click)="logout()"
              class="w-full py-3 px-4 rounded-xl bg-red-500 hover:bg-red-600 active:bg-red-700 transition-all duration-300 font-semibold shadow-lg transform hover:-translate-y-1 hover:scale-105">
        Logout
      </button>
    </div>
  </aside>

  <!-- Overlay for mobile -->
  <div
    *ngIf="isSidebarOpen"
    (click)="toggleSidebar()"
    class="fixed inset-0 bg-black/50 z-40 md:hidden">
  </div>

  <!-- Main content -->
  <main class="flex-1 p-6 md:ml-0 relative z-10">
    <!-- Hamburger on right for mobile -->
    <div class="flex justify-end mb-6 md:hidden">
      <button (click)="toggleSidebar()" class="text-gray-700 focus:outline-none hover:text-blue-500 transition">
        <svg *ngIf="!isSidebarOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <svg *ngIf="isSidebarOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Router content -->
    <router-outlet></router-outlet>
  </main>
</div>
